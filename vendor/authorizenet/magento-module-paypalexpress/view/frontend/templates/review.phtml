<?php

/* @var AuthorizeNet\PayPalExpress\Block\Checkout\Review $block */

?>

<div class="anet_paypalexpress-review view">
    <div class="block block-order-details-view">

        <div class="block-content">
            
            <?php if ($block->getShippingAddress()) : ?>
            <div class="box box-order-shipping-method">
                <strong class="box-title">
                    <span><?= $block->escapeHtml(__('Shipping Method')) ?></span>
                </strong>
                <div class="box-content">
                    <?php echo $block->getShippingMethodHtml(); ?>
                </div>
            </div>
            <div class="box box-order-shipping-address">
                <strong class="box-title">
                    <span><?= $block->escapeHtml(__('Shipping Address')) ?></span>
                </strong>
                <div class="box-content">
                    <?php echo $block->escapeHtml($block->renderAddress($block->getShippingAddress()), ['br']); ?>
                </div>
            </div>
            
            <?php endif; ?>
            
            <div class="box box-order-payment-method">
                <strong class="box-title">
                    <span><?= $block->escapeHtml(__('Payment Method')) ?></span>
                </strong>
                <div class="box-content">
                    <?php echo $block->escapeHtml($block->getPaymentMethodTitle()); ?><br/>
                    <?php echo __('Account'); ?>: <?php echo $block->escapeHtml($block->getPayPalAccount()); ?>
                </div>
            </div>
        </div>
    </div>

    <div class="vc-edit-button">
        <?php echo __('Change billing or shipping information above with') ?><br/>
        <?php echo $block->getChildHtml('review.change.button'); ?>
    </div>
    
    <div class="anet_paypalexpress-review-discount">
        <?= $block->getChildHtml('paypalexpress.additional.actions') ?>
    </div>
    <div class="anet_paypalexpress-review-items">
        <div class="ec-review-title">
            <strong><?= $block->escapeHtml(__('Items in Your Shopping Cart')) ?></strong>
            <a href="<?= $block->escapeUrl($block->getUrl('checkout/cart')) ?>" class="action edit">
                <span><?= $block->escapeHtml(__('Edit Shopping Cart')) ?></span>
            </a>
        </div>

        <?= $block->getChildHtml('details') ?>

        <form method="post" id="order-review-form" action="<?= $block->escapeUrl($block->getPlaceOrderUrl()) ?>"
              class="form order-review-form">
            <?= $block->getBlockHtml('formkey') ?>
            <?= $block->getChildHtml('agreements') ?>
            
            <div class="actions-toolbar" id="review-buttons-container">
                <div class="primary">
                    <button type="button" id="review-submit" class="action checkout primary"
                            value="<?= $block->escapeHtml(__('Place Order')) ?>">
                        <span><?= $block->escapeHtml(__('Place Order')) ?></span>
                    </button>
                </div>
                <span class="please-wait load indicator" id="review-please-wait" style="display: none;"
                      data-text="<?= $block->escapeHtml(__('Submitting order information...')) ?>">
                   <span><?= $block->escapeHtml(__('Submitting order information...')) ?></span>
                </span>
            </div>
        </form>
        
    </div>
</div>
<script type="text/x-magento-init">
    {
        "#order-review-form": {
            "validation": {},
            "aecOrderReview": {
                "shippingSubmitFormSelector": "#shipping-method-form",
                "shippingSelector": "#shipping-method",
                "shippingMethodUpdateUrl": "<?= $block->escapeUrl($block->getUpdateShippingMethodsUrl()) ?>",
                "isAjax": <?= /* @noEscape */ $block->getUseAjax() ? 'true' : 'false' ?>,
                "canEditShippingMethod": true,
                "shippingAddressFromSelector": "#shipping-address-form",
                "billingAddressFromSelector": "#billing-address-form"
            }
        },
        "#shipping-address-form": {
            "validation": {}
        },
        "#billing-address-form": {
            "validation": {}
        }
    }
</script>
